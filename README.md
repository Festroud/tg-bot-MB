# Telegram Bot

## Описание
Telegram бот с системой авторизации пользователей и административными функциями. Бот использует MongoDB для хранения данных пользователей.

## Функциональность

### Основные команды
- `/start` - Запустить бота
- `/help` - Показать справку
- `/weather` - Узнать погоду
- `/hotDrinks` - Горячие напитки
- `/coldDrinks` - Холодные напитки
- `/showcase` - Витрина
- `/work` - рабочий график
- `/weekly` - недельная заявка
- `/keywords` - Ключевые слова
- `/noorgoodday` - мотивация
- `/bubble` -  бабл-ти

### Административные команды (только для админа)
- `/adduser <telegram_id>` - Добавить пользователя
- `/removeUser <telegram_id>` - Удалить пользователя
- `/listUsers` - Показать список авторизованных пользователей
- `/setAdmin <telegram_id>` - Назначить пользователя администратором
- `/checkDb` - Проверить статус в базе данных

## Технический стек
- Node.js
- Telegraf.js (фреймворк для Telegram ботов)
- MongoDB (база данных)
- Mongoose (ODM для MongoDB)
- node-cron (для планирования задач)

## Структура проекта
```
src/
├── bot.js              # Основной файл бота
├── config.js           # Конфигурация
├── const.js            # Константы
├── data.json           # Данные
├── commands/           # Команды бота
├── database/           # Работа с базой данных
├── models/             # Модели данных
├── middleware/         # Промежуточные обработчики
├── handlers/           # Обработчики событий
├── utils/             # Вспомогательные функции
├── services/          # Сервисы
└── img/               # Изображения
```

## Установка и запуск

1. Клонируйте репозиторий
2. Установите зависимости:
```bash
npm install
```

3. Создайте файл `.env` в корневой директории и добавьте:
```
BOT_TOKEN=ваш_токен_бота
ADMIN_ID=ваш_telegram_id
MONGODB_URI=ваш_uri_для_mongodb
```

4. Установите и запустите MongoDB

5. Запустите бота:
```bash
node src/bot.js
```

## Система авторизации

### Уровни доступа
1. Неавторизованные пользователи
   - Могут отправлять обычные сообщения
   - Получают сообщение об отказе в доступе при использовании команд
   - Не имеют доступа к ключевым словам

2. Авторизованные пользователи
   - Имеют доступ к основным командам бота
   - Могут использовать все функции, кроме админ-команд
   - Имеют доступ к ключевым словам

3. Администратор
   - Имеет доступ ко всем командам
   - Может управлять пользователями
   - Видит админ-команды в меню
   - Может назначать других администраторов

### База данных
- База данных: `telegram-bot`
- Коллекция: `users`
- Структура записи пользователя:
```json
{
  "telegramId": "string",
  "username": "string",
  "isAuthorized": boolean,
  "isAdmin": boolean,
  "addedAt": "date"
}
```

## Автоматические сообщения

Бот автоматически отправляет следующие сообщения:
- Утренняя мотивация (8:30)
- Факт дня (1:19)
- Вечерняя благодарность (20:30)
- Случайные сообщения (каждые 2 часа с 10 до 20)
- Рабочие напоминания по расписанию